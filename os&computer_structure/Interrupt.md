# Interrupt에 대해 설명해주세요.

- **자료 조사**
    
    > 마이크로프로세서(CPU)에서 **인터럽트**(Interrupt)란 마이크로프로세서가 프로그램을 실행하고 있을 때, 입출력 하드웨어 등의 장치에 예외 상황이 발생하여 처리가 필요할 경우에 마이크로프로세서에게 알려 처리할 수 있도록 하는 것을 말한다.
    > 
    
    ![[그림 1] Common Functions of Interrupts](https://github.com/BangDori/CS_interview_Study/blob/main/os%26computer_structure/img/Common_Functions_of_Interrupts.png)
    
    - **동작 과정**
        
        Interrupt 발생 시, 운영체제는 현재 실행중인 프로세스(P1)의 실행을 멈추고 해당 Interrupt에 대응하는 Interrupt handler를 실행합니다. 이 때, 현재 실행중이던 프로세스의 상태를 Process table에 저장하고 다음으로 실행할 프로세스(P2)의 정보를 가져와 CPU가 처리하도록 합니다.
        Interrupt vector는 Interrupt 발생 시 처리해야 할 Interrupt handler의 주소를 가지고 있는 테이블로, 각 Interrupt에 해당하는 Interrupt handler의 주소가 저장되어 있습니다. 
        Interrupt vector는 프로세스의 정보를 저장하는 테이블이 아닌, Interrupt에 해당하는 Interrupt handler의 주소를 가지고 있는 테이블입니다.
            
    ### 인터럽트의 종류
    
    1. **CPU의 하드웨어 신호에 의해 발생**되는 **외부 인터럽트**
    2. **명령어의 수행에 의해 발생**되는 **내부 인터럽트**
    3. **사용자가 프로그램을 실행시키거나 OS를 호출하는 동작을 수행하는 경우에 발생**되는 **소프트웨어 인터럽트** (= Trap)
    
    - **외부 인터럽트(External Interrupt)**
        
        > CPU가 실행 중인 프로그램 외부에서 발생하는 인터럽트로, 주로 입출력 장치나 타이머 등 외부 장치에서 신호를 보내어 발생합니다.
        > 
        
        외부 인터럽트는 하드웨어적으로 처리되며, 인터럽트 발생 시 CPU는 현재 실행 중인 프로그램을 중단하고 해당 인터럽트를 처리하는 인터럽트 핸들러로 이동합니다. 인터럽트 핸들러는 인터럽트가 발생한 원인을 파악하고, 그에 따라 적절한 처리를 수행합니다.
        
        예를 들어, 키보드로 입력을 받아들이는 경우에는 키보드에서 신호를 보내어 외부 인터럽트를 발생시키고, 인터럽트 핸들러는 해당 입력 값을 읽어들여서 프로그램에서 사용할 수 있도록 처리합니다.
        
        외부 인터럽트는 운영체제와 장치 드라이버가 함께 처리합니다. 운영체제는 인터럽트를 처리하여 프로세스의 실행을 일시 중지하고, 장치 드라이버는 실제로 인터럽트에 의한 입력/출력 처리를 수행합니다. 이렇게 함으로써, CPU가 직접 입출력 처리를 수행하지 않고도 외부 입력/출력 처리를 효율적으로 수행할 수 있습니다.
        
    - **내부 인터럽트(Internal Interrupt)**
        
        > CPU 내부에서 발생하는 인터럽트로, 주로 프로그램 실행 중 발생하는 오류나 예외 상황에서 발생하며, 이를 처리하기 위해 CPU가 내부적으로 예외 처리 메커니즘을 갖고 있습니다.
        > 
        
        내부 인터럽트에는 다음과 같은 종류가 있습니다.
        
        1. 예외 상황(Interrupt Exception): 프로그램 실행 중에 발생하는 오류로서, 0으로 나누기, 메모리 접근 오류, 스택 오버플로우 등이 있습니다.
        2. 시스템 호출(System Call): 프로그램이 운영체제의 서비스를 호출할 때 발생하는 인터럽트입니다.
        3. 프로그램 인터럽트(Program Interrupt): 프로그램 실행 도중에 외부에서 인터럽트를 발생시키는 것으로, 디버깅이나 예외 처리 등에 사용됩니다.
        
        내부 인터럽트는 외부 인터럽트와 달리 CPU 내부에서 처리되므로, 일반적으로 매우 빠르게 처리됩니다. 내부 인터럽트가 발생하면 CPU는 해당 인터럽트를 처리하기 위해, 인터럽트 서비스 루틴(Interrupt Service Routine)이라고도 하는 예외 처리 루틴을 실행합니다. 이를 통해 프로그램 실행 중 발생하는 예외 상황을 처리할 수 있습니다.
        
        - **내부 인터럽트 처리 방식**
            1. 예외 상황
                - 예외 상황이 발생하면, CPU는 해당 예외에 대한 예외 처리 루틴을 실행합니다.
                - 예외 처리 루틴은 해당 예외에 대한 처리를 수행하고, 예외가 발생한 프로세스에 대한 정보를 수집합니다.
                - 이후 운영체제는 해당 프로세스를 강제 종료시키거나, 예외가 발생한 지점으로 되돌려 다시 실행시킵니다.
            
            1. 시스템 호출
                - 시스템 콜이 발생하면, CPU는 해당 시스템 콜을 처리하기 위한 인터럽트 서비스 루틴을 실행합니다.
                - 인터럽트 서비스 루틴은 해당 시스템 호출에 대한 처리를 수행하고, 결과를 반환합니다.
                - 시스템 호출이 완료되면, 운영체제는 프로세스를 다시 실행합니다.
            
            1. 프로그램 인터럽트
                - 프로그램 인터럽트가 발생하면, CPU는 해당 인터럽트에 대한 인터럽트 서비스 루틴을 실행합니다.
                - 인터럽트 서비스 루틴은 해당 인터럽트에 대한 처리를 수행하고, 프로세스를 다시 실행합니다.
                - 프로그램 인터럽트는 디버깅이나 예외 처리 등에 사용됩니다.
    - **소프트웨어 인터럽트(Software Interrupt)**
        
        > 프로그램 내에서 명령어를 실행하는 도중, 특별한 인터럽트 명령을 인위적으로 실행하여 인터럽트를 발생시키는 것
        > 
        
        이는 프로그램 내에서 인터럽트를 발생시키는 것으로, 소프트웨어적으로 발생합니다.
        
        소프트웨어 인터럽트는 다양한 용도로 사용됩니다. 예를 들어, 디버깅을 위한 브레이크 포인트(breakpoint)나 프로그램 내부에서의 예외 상황을 처리하기 위한 예외 처리(exception handling) 등에 사용됩니다.
        
- **답안**
    
    인터럽트란, CPU가 프로그램을 실행하고 있을 때, 입출력 하드웨어 등의 장치에 예외 상황이 발생하여 처리가 필요할 경우에 CPU에게 알려 일을 처리할 수 있도록 하는 것을 의미합니다. 인터럽트는 크게 외부 인터럽트, 내부 인터럽트, 소프트웨어 인터럽트 3가지로 구분할 수 있습니다.
    
    외부 인터럽트는 하드웨어에서 발생되는 인터럽트로 운영체제와 장치 드라이버가 함께 처리합니다. 그리고 내부 인터럽트의 경우 프로그램 실행 중 발생하는 오류나 예외 상황에서 발생되는 인터럽트로 0으로 나누거나, page fault 상황에서 발생되는데, 인터럽트 서비스 루틴이라고 하는 예외 처리 루틴을 실행하여 인터럽트를 처리합니다. 마지막으로, 소프트웨어 인터럽트가 있는데 이는 프로그램 내에서 인위적으로 인터럽트를 발생시키는 것으로, 디버깅 혹은 예외 처리 등을 위해 사용됩니다.
    
- **참고 자료**
    1. 운영체제 - 곽종욱 교수님
    2. [https://ko.wikipedia.org/wiki/인터럽트](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
    3. [https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer Science/Operating System/Interrupt.md](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Interrupt.md)
    4. ChatGPT
    5. [https://hibee.tistory.com/264](https://hibee.tistory.com/264)
    6. [https://ko.wikipedia.org/wiki/인터럽트_핸들러](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8_%ED%95%B8%EB%93%A4%EB%9F%AC)
